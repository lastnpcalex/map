<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inhabited Space Transit Map - 2370 SolUT</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #050510;
            font-family: 'Courier New', monospace;
            color: #e0e0e0;
            overflow: auto;
            min-height: 100vh;
        }
        
        .container {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            padding: 15px 30px;
            background: linear-gradient(180deg, #0a0a1a 0%, #050510 100%);
            border-bottom: 1px solid #1a1a3e;
        }
        
        h1 {
            font-size: 1.8em;
            color: #4a9eff;
            text-transform: uppercase;
            letter-spacing: 3px;
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 0.85em;
            color: #666;
            letter-spacing: 1px;
        }
        
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        #map-container {
            flex: 0 0 700px;
            position: relative;
            background: radial-gradient(ellipse at center, #0a0a1a 0%, #050510 100%);
        }
        
        svg {
            width: 100%;
            height: 100%;
        }
        
        .route-line {
            stroke-width: 4;
            fill: none;
            opacity: 0.3;
            transition: all 0.3s;
        }
        
        .route-line.active {
            stroke-width: 7;
            opacity: 1;
            filter: drop-shadow(0 0 8px currentColor);
        }
        
        .uplb-route { stroke: #4a9eff; }
        .swi-route { stroke: #ff6b6b; }
        .hw-route { stroke: #51cf66; }
        .inter-route { stroke: #ffd43b; }
        
        .station-group {
            cursor: pointer;
        }
        
        .station-circle {
            transition: all 0.3s;
        }
        
        .station-group:hover .station-circle {
            r: 13;
            filter: drop-shadow(0 0 10px currentColor);
        }
        
        .station-circle.selected {
            stroke-width: 5 !important;
            filter: drop-shadow(0 0 12px currentColor);
        }
        
        .station-circle.in-route {
            stroke-width: 4 !important;
            filter: drop-shadow(0 0 8px currentColor);
        }
        
        .station-label {
            font-size: 14px;
            font-weight: bold;
            fill: #fff;
            pointer-events: none;
            text-shadow: 0 0 4px #000, 0 0 8px #000;
        }
        
        .station-sublabel {
            font-size: 10px;
            fill: #999;
            pointer-events: none;
            text-shadow: 0 0 3px #000;
        }
        
        .legend {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(10, 10, 26, 0.95);
            border: 1px solid #2a2a4e;
            border-radius: 6px;
            padding: 15px;
            backdrop-filter: blur(10px);
        }
        
        .legend h3 {
            color: #4a9eff;
            font-size: 0.95em;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin: 6px 0;
            font-size: 0.85em;
        }
        
        .legend-line {
            width: 25px;
            height: 3px;
            margin-right: 10px;
            border-radius: 2px;
        }
        
        .route-planner {
            flex: 1;
            background: #0a0a1a;
            border-top: 2px solid #1a1a3e;
            padding: 30px;
            min-height: 300px;
        }
        
        .planner-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #2a2a4e;
        }
        
        .planner-header h2 {
            color: #4a9eff;
            font-size: 1.5em;
            letter-spacing: 2px;
        }
        
        .clear-btn {
            background: #ff6b6b;
            border: none;
            color: #fff;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            letter-spacing: 1px;
            transition: all 0.3s;
        }
        
        .clear-btn:hover {
            background: #ff5252;
            box-shadow: 0 0 10px rgba(255, 107, 107, 0.5);
        }
        
        .route-display {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .route-stop {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .stop-number {
            background: #4a9eff;
            color: #000;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .stop-name {
            font-size: 1.1em;
            color: #fff;
            font-weight: bold;
        }
        
        .stop-arrow {
            color: #666;
            font-size: 1.5em;
        }
        
        .totals-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .total-box {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #2a2a4e;
            border-left: 4px solid #4a9eff;
            border-radius: 6px;
            padding: 20px;
        }
        
        .total-label {
            font-size: 0.85em;
            color: #888;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
        }
        
        .total-value {
            font-size: 2em;
            color: #4a9eff;
            font-weight: bold;
        }
        
        .total-unit {
            font-size: 0.5em;
            color: #999;
            margin-left: 5px;
        }
        
        .leg-details {
            margin-top: 30px;
        }
        
        .leg-details h3 {
            color: #4a9eff;
            font-size: 1.2em;
            margin-bottom: 15px;
            letter-spacing: 1px;
        }
        
        .leg-item {
            background: rgba(0, 0, 0, 0.2);
            border-left: 3px solid #ffd43b;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 4px;
        }
        
        .leg-route {
            font-size: 1.1em;
            color: #fff;
            font-weight: bold;
            margin-bottom: 8px;
        }
        
        .leg-times {
            display: flex;
            gap: 20px;
            font-size: 0.9em;
            color: #aaa;
        }
        
        .leg-time {
            display: flex;
            gap: 5px;
        }
        
        .leg-time-label {
            color: #666;
        }
        
        .leg-time-value {
            color: #fff;
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #666;
        }
        
        .empty-state-icon {
            font-size: 4em;
            margin-bottom: 20px;
            opacity: 0.3;
        }
        
        .empty-state-text {
            font-size: 1.2em;
            letter-spacing: 1px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Inhabited Space Transit Network</h1>
            <div class="subtitle">K-Tube Route Planner â€¢ ERR-AL Drive â€¢ 2370 SolUT</div>
        </header>
        
        <div class="main-content">
            <div id="map-container">
                <svg id="transit-map" viewBox="0 0 1600 1000"></svg>
                
                <div class="legend">
                    <h3>FACTION ROUTES</h3>
                    <div class="legend-item">
                        <div class="legend-line uplb-route"></div>
                        <span>UPLB</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line swi-route"></div>
                        <span>SWI</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line hw-route"></div>
                        <span>Homeworlds</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-line inter-route"></div>
                        <span>Inter-faction</span>
                    </div>
                </div>
            </div>
            
            <div class="route-planner">
                <div class="planner-header">
                    <h2>ROUTE PLANNER</h2>
                    <button class="clear-btn" onclick="clearRoute()">CLEAR ROUTE</button>
                </div>
                
                <div id="route-content">
                    <div class="empty-state">
                        <div class="empty-state-icon">ðŸš€</div>
                        <div class="empty-state-text">Click stations on the map to plan your route</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Schematic positions optimized for readability
        const stations = {
            'Sol': {x: 800, y: 500, pop: 10440, faction: 'UPLB', labelOffset: {x: 0, y: -25}},
            'Gamov': {x: 950, y: 300, pop: 631, faction: 'UPLB', labelOffset: {x: 0, y: -25}},
            'Wolf': {x: 650, y: 250, pop: 432, faction: 'UPLB', labelOffset: {x: 0, y: -25}},
            'Luyten': {x: 500, y: 400, pop: 322, faction: 'UPLB', labelOffset: {x: -60, y: 0}},
            'Gowjin': {x: 500, y: 600, pop: 317, faction: 'UPLB', labelOffset: {x: -60, y: 0}},
            'Issetock': {x: 650, y: 700, pop: 283, faction: 'UPLB', labelOffset: {x: 0, y: 25}},
            'Nursia': {x: 950, y: 700, pop: 411, faction: 'UPLB', labelOffset: {x: 0, y: 25}},
            'Bakunawa': {x: 800, y: 150, pop: 215, faction: 'UPLB', labelOffset: {x: 0, y: -25}},
            'Vega': {x: 1150, y: 450, pop: 262, faction: 'SWI', labelOffset: {x: 60, y: 0}},
            'Ya Ke': {x: 1400, y: 350, pop: 579, faction: 'SWI', labelOffset: {x: 60, y: 0}},
            'Zi Wei Yuan': {x: 1400, y: 600, pop: 259, faction: 'SWI', labelOffset: {x: 60, y: 0}},
            'Sipapu': {x: 1150, y: 700, pop: 254, faction: 'SWI', labelOffset: {x: 60, y: 0}},
            'Proxima': {x: 300, y: 700, pop: 397, faction: 'HW', labelOffset: {x: -60, y: 10}},
            'Rigil': {x: 400, y: 850, pop: 649, faction: 'HW', labelOffset: {x: 0, y: 25}},
            'Tartarus': {x: 250, y: 550, pop: 231, faction: 'HW', labelOffset: {x: -60, y: 0}},
            'Tau Ceti': {x: 550, y: 900, pop: 228, faction: 'HW', labelOffset: {x: 0, y: 25}},
            'Barnard': {x: 200, y: 850, pop: 455, faction: 'HW', labelOffset: {x: -60, y: 10}}
        };
        
        const routes = [
            {from: 'Sol', to: 'Gamov', proper: 55.58, tau: 6.0, fdr: 24, type: 'uplb'},
            {from: 'Sol', to: 'Wolf', proper: 19.17, tau: 1.92, fdr: 24, type: 'uplb'},
            {from: 'Sol', to: 'Luyten', proper: 17.32, tau: null, fdr: null, type: 'uplb'},
            {from: 'Sol', to: 'Gowjin', proper: 20.78, tau: null, fdr: null, type: 'uplb'},
            {from: 'Sol', to: 'Issetock', proper: 28.48, tau: null, fdr: null, type: 'uplb'},
            {from: 'Sol', to: 'Nursia', proper: 54.86, tau: null, fdr: null, type: 'uplb'},
            {from: 'Sol', to: 'Bakunawa', proper: 56.8, tau: null, fdr: null, type: 'uplb'},
            {from: 'Wolf', to: 'Gamov', proper: 31.55, tau: 3.128, fdr: 48, type: 'uplb'},
            {from: 'Vega', to: 'Ya Ke', proper: 87.23, tau: 12.25, fdr: 48, type: 'swi'},
            {from: 'Ya Ke', to: 'Sipapu', proper: 45.45, tau: 4.51, fdr: 24, type: 'swi'},
            {from: 'Gamov', to: 'Zi Wei Yuan', proper: 76.87, tau: 7.62, fdr: 24, type: 'swi'},
            {from: 'Zi Wei Yuan', to: 'Vega', proper: 82.87, tau: 8.22, fdr: 10, type: 'swi'},
            {from: 'Sol', to: 'Proxima', proper: 5.90, tau: 1.0, fdr: 20, type: 'hw'},
            {from: 'Sol', to: 'Rigil', proper: 5.90, tau: 1.0, fdr: 20, type: 'hw'},
            {from: 'Sol', to: 'Tartarus', proper: 15.13, tau: 1.51, fdr: 24, type: 'hw'},
            {from: 'Sol', to: 'Tau Ceti', proper: 16.5, tau: null, fdr: null, type: 'hw'},
            {from: 'Sol', to: 'Barnard', proper: 8.31, tau: null, fdr: null, type: 'hw'},
            {from: 'Sol', to: 'Vega', proper: 35.43, tau: 3.54, fdr: 10, type: 'inter'},
            {from: 'Wolf', to: 'Vega', proper: 21.69, tau: 2.99, fdr: 1, type: 'inter'},
            {from: 'Gamov', to: 'Vega', proper: 74.18, tau: 7.35, fdr: 48, type: 'inter'},
            {from: 'Gamov', to: 'Ya Ke', proper: 76.22, tau: 7.56, fdr: 20, type: 'inter'},
            {from: 'Gamov', to: 'Sipapu', proper: 40.48, tau: 4.01, fdr: 4, type: 'inter'},
            {from: 'Sol', to: 'Ya Ke', proper: 89.5, tau: 8.95, fdr: 48, type: 'inter'},
            {from: 'Sol', to: 'Zi Wei Yuan', proper: 94.48, tau: 9.45, fdr: 10, type: 'inter'},
            {from: 'Sol', to: 'Sipapu', proper: 56.97, tau: 5.697, fdr: 24, type: 'inter'}
        ];
        
        const svg = document.getElementById('transit-map');
        let plannedRoute = [];
        let routeCircles = {};
        let routeLines = {};
        
        // Draw routes
        routes.forEach((route, idx) => {
            const from = stations[route.from];
            const to = stations[route.to];
            
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('x1', from.x);
            line.setAttribute('y1', from.y);
            line.setAttribute('x2', to.x);
            line.setAttribute('y2', to.y);
            line.classList.add('route-line', `${route.type}-route`);
            line.dataset.from = route.from;
            line.dataset.to = route.to;
            
            const key = `${route.from}-${route.to}`;
            routeLines[key] = line;
            const reverseKey = `${route.to}-${route.from}`;
            routeLines[reverseKey] = line;
            
            svg.appendChild(line);
        });
        
        // Draw stations
        Object.entries(stations).forEach(([name, data]) => {
            const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            g.classList.add('station-group');
            
            const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            circle.classList.add('station-circle');
            circle.setAttribute('cx', data.x);
            circle.setAttribute('cy', data.y);
            circle.setAttribute('r', 9);
            circle.setAttribute('fill', '#0a0a1a');
            circle.setAttribute('stroke', 
                data.faction === 'UPLB' ? '#4a9eff' : 
                data.faction === 'SWI' ? '#ff6b6b' : '#51cf66');
            circle.setAttribute('stroke-width', 3);
            
            routeCircles[name] = circle;
            
            const labelX = data.x + data.labelOffset.x;
            const labelY = data.y + data.labelOffset.y;
            
            const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            label.classList.add('station-label');
            label.setAttribute('x', labelX);
            label.setAttribute('y', labelY);
            label.setAttribute('text-anchor', data.labelOffset.x > 0 ? 'start' : data.labelOffset.x < 0 ? 'end' : 'middle');
            label.textContent = name;
            
            const sublabelY = data.labelOffset.y < 0 ? labelY - 15 : labelY + 15;
            const sublabel = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            sublabel.classList.add('station-sublabel');
            sublabel.setAttribute('x', labelX);
            sublabel.setAttribute('y', sublabelY);
            sublabel.setAttribute('text-anchor', data.labelOffset.x > 0 ? 'start' : data.labelOffset.x < 0 ? 'end' : 'middle');
            sublabel.textContent = `${data.pop}M`;
            
            g.appendChild(circle);
            g.appendChild(label);
            g.appendChild(sublabel);
            svg.appendChild(g);
            
            g.addEventListener('click', (e) => {
                e.stopPropagation();
                addStationToRoute(name);
            });
        });
        
        function addStationToRoute(stationName) {
            // If clicking the same station as last, do nothing
            if (plannedRoute.length > 0 && plannedRoute[plannedRoute.length - 1] === stationName) {
                return;
            }
            
            plannedRoute.push(stationName);
            updateRouteDisplay();
        }
        
        function clearRoute() {
            plannedRoute = [];
            updateRouteDisplay();
        }
        
        function findRoute(from, to) {
            let route = routes.find(r => 
                (r.from === from && r.to === to) || 
                (r.from === to && r.to === from)
            );
            
            if (route && route.from !== from) {
                return {...route, from: to, to: from};
            }
            
            return route;
        }
        
        function updateRouteDisplay() {
            // Update circle styles
            Object.entries(routeCircles).forEach(([name, circle]) => {
                circle.classList.remove('selected', 'in-route');
                if (plannedRoute.includes(name)) {
                    if (name === plannedRoute[plannedRoute.length - 1]) {
                        circle.classList.add('selected');
                    } else {
                        circle.classList.add('in-route');
                    }
                }
            });
            
            // Update line styles
            Object.values(routeLines).forEach(line => {
                line.classList.remove('active');
            });
            
            for (let i = 0; i < plannedRoute.length - 1; i++) {
                const key = `${plannedRoute[i]}-${plannedRoute[i + 1]}`;
                if (routeLines[key]) {
                    routeLines[key].classList.add('active');
                }
            }
            
            // Update bottom panel
            const routeContent = document.getElementById('route-content');
            
            if (plannedRoute.length === 0) {
                routeContent.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ðŸš€</div>
                        <div class="empty-state-text">Click stations on the map to plan your route</div>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="route-display">';
            plannedRoute.forEach((station, idx) => {
                html += `
                    <div class="route-stop">
                        <div class="stop-number">${idx + 1}</div>
                        <div class="stop-name">${station}</div>
                    </div>
                `;
                if (idx < plannedRoute.length - 1) {
                    html += '<div class="stop-arrow">â†’</div>';
                }
            });
            html += '</div>';
            
            // Calculate totals
            let totalProper = 0;
            let totalTau = 0;
            let totalFdr = 0;
            let legs = [];
            let hasIncomplete = false;
            
            for (let i = 0; i < plannedRoute.length - 1; i++) {
                const route = findRoute(plannedRoute[i], plannedRoute[i + 1]);
                if (route) {
                    totalProper += route.proper;
                    totalTau += route.tau || 0;
                    totalFdr += route.fdr || 0;
                    legs.push({
                        from: plannedRoute[i],
                        to: plannedRoute[i + 1],
                        ...route
                    });
                } else {
                    hasIncomplete = true;
                    legs.push({
                        from: plannedRoute[i],
                        to: plannedRoute[i + 1],
                        noRoute: true
                    });
                }
            }
            
            if (plannedRoute.length > 1) {
                html += '<div class="totals-section">';
                html += `
                    <div class="total-box">
                        <div class="total-label">Total Proper Time</div>
                        <div class="total-value">${totalProper.toFixed(1)}<span class="total-unit">days</span></div>
                    </div>
                `;
                
                if (totalTau > 0) {
                    html += `
                        <div class="total-box">
                            <div class="total-label">Total Tau Time</div>
                            <div class="total-value">${totalTau.toFixed(1)}<span class="total-unit">hours</span></div>
                        </div>
                    `;
                }
                
                if (totalFdr > 0) {
                    html += `
                        <div class="total-box">
                            <div class="total-label">Total FDR Burn</div>
                            <div class="total-value">${totalFdr.toFixed(1)}<span class="total-unit">hours</span></div>
                        </div>
                    `;
                }
                html += '</div>';
                
                // Leg details
                html += '<div class="leg-details">';
                html += '<h3>ROUTE SEGMENTS</h3>';
                legs.forEach((leg, idx) => {
                    if (leg.noRoute) {
                        html += `
                            <div class="leg-item" style="border-left-color: #ff6b6b;">
                                <div class="leg-route">${idx + 1}. ${leg.from} â†’ ${leg.to}</div>
                                <div class="leg-times" style="color: #ff6b6b;">No direct route available</div>
                            </div>
                        `;
                    } else {
                        html += `
                            <div class="leg-item">
                                <div class="leg-route">${idx + 1}. ${leg.from} â†’ ${leg.to}</div>
                                <div class="leg-times">
                                    <div class="leg-time">
                                        <span class="leg-time-label">Proper:</span>
                                        <span class="leg-time-value">${leg.proper.toFixed(1)}d</span>
                                    </div>
                        `;
                        if (leg.tau) {
                            html += `
                                    <div class="leg-time">
                                        <span class="leg-time-label">Tau:</span>
                                        <span class="leg-time-value">${leg.tau.toFixed(1)}h</span>
                                    </div>
                            `;
                        }
                        if (leg.fdr) {
                            html += `
                                    <div class="leg-time">
                                        <span class="leg-time-label">FDR:</span>
                                        <span class="leg-time-value">${leg.fdr.toFixed(1)}h</span>
                                    </div>
                            `;
                        }
                        html += `
                                </div>
                            </div>
                        `;
                    }
                });
                html += '</div>';
            }
            
            routeContent.innerHTML = html;
        }
    </script>
</body>
</html>
